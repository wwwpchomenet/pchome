<extend name="Lyout:comment"/>
<block name="css">
<css href="__TREEGRID__/css/jquery.treegrid.css" />
<style>
    .menu_name:hover {
        cursor: pointer;;
    }
</style>
</block>
<block name="js">
<js href="__EXT__/jquery-1.11.3.js" />
<js href="__TREEGRID__/js/jquery.treegrid.js" />
</block>
<block name="admin">
<h1>
    <span class="action-span"><a href="{:U('add')}">添加菜单</a></span>
    <span class="action-span1"><a href="{:U('index/index')}">重庆火锅国际供应链股份有限公司   管理中心</a></span>
    <span id="search_id" class="action-span1"> - {$meta_title} </span>
</h1>
<div style="clear:both"></div>
<form method="post" action="" name="listForm">
    <div class="list-div" id="listDiv">
        <table cellpadding="3" cellspacing="1" class="tree">
            <tr>
                <th>菜单名称</th>
                <th>菜单描述</th>
                <th>排序</th>
                <th>是否显示</th>
                <th>操作</th>
            </tr>
            <foreach name='rows' item='row'>
                <tr class="treegrid-{$row.id} <neq name='row.level' value='1'>treegrid-parent-{$row.parent_id}</neq>">
                    <td class="first-cell"><span class="menu_name">{$row.name}</span></td>
                    <td align="center">{$row.intro}</td>
                    <td align="center">{$row.sort}</td>
                    <td align="center"><img src="__IMG__/{$row.status}.gif" /></td>
                    <td align="center">
                        <a href="{:U('edit',array('id'=>$row['id']))}" title="编辑">编辑</a> |
                        <a href="{:U('remove',array('id'=>$row['id']))}" title="编辑">移除</a>
                    </td>
                </tr>
            </foreach>
        </table>
    </div>
</form>
</block>
<block name="footer"></block>
<script type="text/javascript">
    $('.tree').treegrid(); // treegrid的初始化
    // 增加一个点击名字展示隐藏功能
    $(document).ready(function(){
        $('.menu_name').click(function(){
            $(this).prev().trigger('click');
        });
    });
</script>
</body>
</html>