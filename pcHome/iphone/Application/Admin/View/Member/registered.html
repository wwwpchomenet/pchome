
 <extend name='Lyout:comment'/>
 <block name="css">
        <style type="text/css">
            .red {
                color:red;
            }
        </style>
</block>
 <block name="js">
     <js href="__EXT__/jquery_validation/jquery.validate.js"/>
       <script type="text/javascript">
          
          function bindPhoneNum() {
            //发送ajax请求到后台
            var url = '{:U("index.php/Admin/Member/sendSMS")}';
            var data = {
                'telphone':$('#tel').val()
            };
            $.getJSON(url,data,function(response){
                console.debug(response);
            });
            }

        $(function(){
            $("#signup").validate({
                errorPlacement: function (error, element) {
                // alert(error.html()); 
             
//                    alert(error.html()); 
               
                  },
//                errorPlacement:function(error,element){
//                    var msg = error[0].innerHTML;
//                    element.siblings('.red').text(msg);
//                },
//                success:function(error,element){
//                    $(element).siblings('.red').text('');//成功后清空错误提示内容
//                },
                rules:{
                    password:{
                        required:true,
                        rangelength:[6,16]
                    },
                    repassword:{
                        required:true,
                        rangelength:[6,16],
                        equalTo:'#password'
                    },
                    tel:{
                        required:true,
                        number:true,
                        china_mobile:true,
                        remote:'{:U("index.php/Admin/Member/checkUniqueByParams")}'
                    },
                    captcha:{
                        required:true
                    }//手机验证码
                   
                },
                 messages:{
                    password:{
                        required:'密码必填',
                        rangelength:'密码长度必须是6-16位'
                    },
                    repassword:{
                        required:'密码必填',
                        rangelength:'密码长度必须是6-16位',
                        equalTo:'两次密码不一致'
                    },
                    
                    tel:{
                        required:'手机号码必填',
                        number:'手机号码不合法',
                        remote:'手机号码已存在'
                    },
                    captcha:{
                        required:'手机验证码必填'
                    }//手机验证码
                }
            });

            //自定义验证规则
            $.validator.addMethod('china_mobile',function(value,element,params){
                var mobile = /^(13|14|15|17|18)\d{9}$/;
                return this.optional(element) || mobile.test(value);
            },'手机号码不正确');
        });
    </script>  
 </block>
    <block name="admin">
<body style="background:#fff;">
<section> 
  <!-- banner -->
  <div id="slideBox" class="slideBox">
    <div class="bd">
      <ul>
        <li><a title=""><img src="__IMG__/2j.jpg"  alt="" /></a></li>
      </ul>
    </div>
  </div> 
  <!-- end --> 
  <div class="lo_bj">
  	<a href="login.html" class="fl">登录</a>
    <a href="registered.html" class="lo_bottom fl">注册</a>
  </div>
<!--  ------------------表单开始--------------------->
   <form action="{:U()}" method="post" id='signup'>
  <div class="reg_registered">
	<div class="reg_registered_kk">
    	<input type="text" placeholder="手机号" class="reg_phone fl" name="tel" id='tel'/>
        <a  class="reg_yanma fr" onclick="bindPhoneNum(this)">获取验证码</a>
    </div>
    <div class="reg_registered_kk"><input type="text" placeholder="验证码" name="captcha"/></div>
  
    <div class="reg_registered_kk"><input type="password" placeholder="密码" name="password"/></div>
    <div class="reg_registered_kk"><input type="password" placeholder="再次输入密码" name="repassword"/></div> 
    <div class="reg_registered_kk"><input type="text" placeholder="销售码（选填）" name="invitation" /></div>  
  </div>
  
  <a class="lo_anniu" href="registeredNext.html">下一步</a>
   </form>
<!---------------------表单结束------------------------------------>
</section>
</body>
</html>
</block>
 